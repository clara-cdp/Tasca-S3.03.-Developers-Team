<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo list</title>
</head>

<body>
    <h1>Ta-Da! </h1>

    <div id="create">
        <a> <!-- href="/task.phtml--> <button id="createTask"> + </button></a>
    </div>

    <form action="home" method="POST">
        <input type="text" name="keyWord">
        <input type="submit" value="search">ğŸ” <!-- TODO: press search twice -> error / goes to view all -->
    </form>

    <a href="home" style="text-decoration: none;">View all tasks</a>

    <div class="taskContainer">


        <?php $displayTasks = $this->view->tasks ?? $this->tasks ?? []; ?>

        <!-- todo: if search comes up empty message ALERT class-->
        <?php if (empty($displayTasks)): // & (isset($this->view->search)): 
        ?>
            <div class="alert">
                <p>No tasks found... try again!</p>
            </div>
        <?php endif; ?>

        <?php if (empty($displayTasks)):
        ?>
            <p>All Done! Use " +" button to add a new task.</p>

        <?php else: ?>
            <?php foreach ($displayTasks as $task): ?>
                <div class='taskBox' style="border: 1px solid black; width:200px; height:200px;" ;>
                    <h3><?php echo htmlspecialchars($task['name']); ?></h3>
                    <p><?php echo htmlspecialchars($task['description']); ?></p>
                    <p><?php echo htmlspecialchars($task['created_at']); ?></p>

                    <?php /*
                    <p>Status: <?php echo $task['status']; // need to add status to 'task'
                                ?></p>*/ ?>
                    <a action='update.phtml'><button>âœï¸</button></a>
                    <!-- TODO: find edit logo -->
                    <a href="delete?id=<?php echo $task['id']; ?>" onclick="return confirm('Are you sure you want to delete this task?');">
                        <button>ğŸ—‘ï¸</button></a>
                    <!-- TODO: find bin logo / add pop-up box: are you sure?-->

                </div>
            <?php endforeach; ?>
        <?php endif; ?>

    </div>









</body>

</html>